package daif.tech.ui;

import daif.tech.service.RegisterBoardService;
import daif.tech.util.UserInfoValidator;

import java.math.BigDecimal;
import java.util.Scanner;

public class RegisterBoard {

    private static RegisterBoard registerBoard;

    private RegisterBoard(){

    }

    public static RegisterBoard getInstance(){
        if(registerBoard == null){
            registerBoard = new RegisterBoard();
        }
        return registerBoard;
    }

    RegisterBoardService registerBoardService = new RegisterBoardService();

    public void showRegisterBoard(){

        Scanner get = new Scanner(System.in);

        boolean isValidUserName = false,
                isValidPhoneNumber = false,
                isValidBalanceOptionChoice = false;

        String username = "";
        while (!isValidUserName) {
            System.out.println("Enter your preferred username : ");
            username = get.nextLine();
            isValidUserName = UserInfoValidator.validateEnteredUserName(username);
        }

        String phoneNumber = "";
        while (!isValidPhoneNumber) {
            System.out.println("Enter your phone number : ");
            phoneNumber = get.nextLine();
            isValidPhoneNumber = UserInfoValidator.validatePhoneNumber(phoneNumber);
        }


        System.out.println("Enter your password : ");
        String password = get.nextLine();

        BigDecimal initialBalance = new BigDecimal(0);
        while (!isValidBalanceOptionChoice) {
            System.out.println("Do you want to initialize your account with balance ? Y/N");
            String choice = get.nextLine();
            choice = choice.trim();
            boolean isValidCharacterOption = UserInfoValidator.isValidOptionCharacter(choice);
            if (isValidCharacterOption) {
                if (choice.equalsIgnoreCase("y")) {
                    System.out.println("Enter amount : ");
                    initialBalance = get.nextBigDecimal();
                    isValidBalanceOptionChoice = true;
                } else if (choice.equalsIgnoreCase("n")) {
                    initialBalance = new BigDecimal(0);
                    isValidBalanceOptionChoice = true;
                }
            }
        }

        registerBoardService.registerUser(username,password,phoneNumber,initialBalance);

    }


}
